<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>3 Second Game</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="./default.css">

</head>
<body>
    <div class="container my-5">
        <div class="row p-4 pb-0 pe-lg-0 pt-lg-5 align-items-center rounded-3 border shadow-lg">
            <div class="p-3 p-lg-5 pt-lg-3">
                <h1 class="display-4 fw-bold lh-1 text-body-emphasis">Can you stop the timer at exactly 3 seconds?</h1>
                <p class="lead">The button below starts an invisible timer when pressed. The challenge is simple. Press the button again once exactly 3 seconds have elapsed. If you get within .2 seconds, you pass. Anything more or less, try again.</p>
                <div class="mt-5 d-grid gap-2 d-sm-flex justify-content-sm-center">
                    <button id="timerButton" type="button" onclick="timerClicked()" class="btn btn-primary btn-lg px-4 me-md-2 fw-bold">Start</button>
                </div>
                <div class="mb-5 d-grid gap-2 d-sm-flex justify-content-sm-center">
                    <p id="score" class="lead scoreColor">Your score is:</p>
                </div>
                <div class="mb-5 d-grid gap-2 d-sm-flex justify-content-sm-center">
                    <div id="stop_watch_container">
                        <div id="stop_watch_hand"></div>
                    </div>
                </div>
                <div class="d-grid gap-2 justify-content-md-start mb-4 mb-lg-3">
                    <button id="historyButton" type="button" class="btn btn-outline-secondary btn-lg px-4">History</button>
                </div>
            </div>
        </div>
    </div>
</body>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>

<script type="text/javascript">
    const timerTarget = 3000; //Set timerTarget to 3000ms. All date objects will be quantified in milliseconds for simplicity.
    let startTime = new Date();
    let isTimerActive = false;

    function timerClicked() {
        if (isTimerActive === false) { //start timer
            startTime = new Date();

            document.querySelector('#score').textContent = "Your score is:"; //hides previous score
            document.querySelector('#timerButton').textContent = "Stop";

            isTimerActive = true;
        }
        else { //stop timer and record time elapsed
            let elapsedTime = new Date() - startTime;
            let score = timerTarget - elapsedTime;

            printScore(elapsedTime);

            isTimerActive = false;
        }
    }

    function printScore(elapsedTime) {
        let score = timerTarget - elapsedTime;

        elapsedTime = elapsedTime / 1000;
        score = score / 1000;

        document.querySelector('#score').textContent = `The timer ran for ${elapsedTime} seconds. Your Score is ${score}`;
        document.querySelector('#timerButton').textContent = "Start";
    }
</script>

</html>